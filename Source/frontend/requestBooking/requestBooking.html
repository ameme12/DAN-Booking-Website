<!DOCTYPE html>
<html>

<!--transform: translate(x,y);
-->
<meta name = "viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Young+Serif&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="styleSidebar.css">
<link rel="stylesheet" href="RequestStyles.css">

<head>

</head>

<body>

<div class = "sidebar">

    <header>

        <div class ="dashboard-box">

                        <span class="image">

                        <img src="mcgill_crest.png" alt="mcgill-crest">

                        </span>


            <div class="text dashboard-text">

                <span class="name" >Mcgill</span>
                <span class="function"  >Bookings</span>

            </div>

        </div>

        <i class="fas fa-chevron-left toggle"></i>

    </header>


    <div class="dashboard-divide">

    </div>

    <div class="menu-bar">

        <div class="menu">

            <li>
                <a href="#">
                    <i class="fas fa-calendar-alt icon"></i>
                    <span class="text nav-text">Bookings</span>

                </a>

            </li>

            <li>

                <a href="#">
                    <i class="fas fa-plus-circle icon"></i>
                    <span class="text nav-text">Create a booking</span>

                </a>
            </li>

            <li>

                <a href="#">
                    <i class="fas fa-envelope icon"></i>
                    <span class="text nav-text">Request a booking</span>

                </a>

            </li>

            <li>

                <a href="#">
                    <i class="fas fa-poll icon"></i>
                    <span class="text nav-text">Availabity polls</span>

                </a>

            </li>


        </div>


    </div>

    <br><br>
    <div class="dashboard-divide"></div>

    <div class= "sidebar-bottom">

        <button href="#" class="button logout-button">
            <i class="fas fa-sign-out-alt icon" ></i><span class="text logout-text">Logout</span>
        </button>
    </div>


</div>

<script>

    const body = document.querySelector("body"),
        sidebar = body.querySelector(".sidebar"),
        toggle = body.querySelector(".toggle");


    toggle.addEventListener("click", () => {
        sidebar.classList.toggle("close");
    });
</script>

<div class = "page-content">
    <form action="sendRequest.php" method="post">

        <div class = "request-box">
            <h2>Request a booking</h2>

            <h4>Select a staff member:</h4>

            <select name = "staff" id="staff-selector" class="staff-selector">
                <option value="">--Please choose an option--</option>

            </select>

            <h4>Select a date: </h4>

            <div class="request-box-bottom">

                <input type="submit" value="Press Here" class="submit-button">

            </div>

        </div>

    </form>




    <script>

        const staffSelector = document.getElementById("staff-selector");
        fetch(`http://localhost/getStaff.php?`)
            .then(response => response.json())
            .then(data => {


                    if (data.length === 0){
                        staffSelector.innerHTML = "<p>There are currently no staff with a member account</p>";
                        return;
                    }

                    data.forEach(staff => {

                        const option = document.createElement("option");
                        option.value = staff.userId;
                        option.textContent = `${staff.firstName} ${staff.lastName}`;
                        staffSelector.appendChild(option);

                    });
                }
            )
            .catch(error => {
                console.error("Error fetching polls:", error);
                staffSelector.innerHTML = "<p> Error loading polls</p>"
            })


    </script>



</div>
</body>
</html>